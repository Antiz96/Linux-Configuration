# i3

## Install Xorg and graphical drivers (optional)

- For regular computers:  
  
```
sudo pacman -S xorg-server nvidia
```

- For Raspberry Pi:  
  
```
sudo pacman -S xorg-server xf86-video-fbdev
sudoedit /boot/config.txt
```

> [...]  
> gpu_mem=256 #Increasing the reserved memory for the GPU

## Install i3

i3 with a few extra packages according to my personal preferences.  
Still a very minimal installation though.

- For regular computers:  

```
sudo pacman -S i3-wm xfce4-terminal polkit-gnome pulseaudio picom thunar thunar-archive-plugin file-roller gvfs xdg-user-dirs mousepad ristretto flameshot notification-daemon gnome-calculator network-manager-applet blueman redshift openssh xorg-xinit xorg-xrandr xautolock i3lock lxappearance numlockx playerctl gsimplecal tint2 feh
sudo localectl --no-convert set-x11-keymap fr #Configure Keyboard layout for x11
```

- For Raspberry Pi:  

```
sudo pacman -S i3-wm xfce4-terminal polkit-gnome pulseaudio mousepad ristretto thunar thunar-archive-plugin file-roller gvfs notification-daemon xdg-user-dirs network-manager-applet xorg-xinit xorg-xrandr i3lock numlockx playerctl tint2 feh
sudo localectl --no-convert set-x11-keymap fr #Configure Keyboard layout for x11
```

### Configure startx for i3

I'm not using any display manager with i3.  
I'm using startx instead. I configure it this way:  

```
cp /etc/X11/xinit/xinitrc ~/.xinitrc
vim ~/.xinitrc #Delete the 5 last lines and add the following ones instead
```

> [...]  
> #Start i3  
> export XDG_SESSION_TYPE=X11  
> xrandr --output DP-0 --primary --mode 1920x1080 --rate 165 --output HDMI-0 --mode 1920x1080 --rate 165 --left-of DP-0  
> exec i3  
  
Modify the `xrandr` command in the above snippet according to your monitor configuration.  
  
For me:  
- Desktop: `xrandr --output DP-0 --primary --mode 1920x1080 --rate 165 --output HDMI-0 --mode 1920x1080 --rate 165 --left-of DP-0`
- Laptop: `xrandr --output eDP-1 --primary --mode 1920x1080 --rate 60`
  
  
```
vim ~/.bash_profile
```

> [...]  
> #Autostart i3   
> ``if [ -z "${DISPLAY}" ] && [ "${XDG_VTNR}" -eq 1 ]; then``   
> > exec startx  
>  
> fi

## Reboot and log into i3

```
sudo reboot
```

## Install the yay AUR Helper

```
sudo pacman -S git
cd /tmp
git clone https://aur.archlinux.org/yay.git
cd yay
makepkg -si
```

## Enable multilib repo in pacman.conf

```
sudo vim /etc/pacman.conf
```
> [multilib]  
> Include = /etc/pacman.d/mirrorlist  
  
```
sudo pacman -Syy
```

## Install bluetooth support

- With an integrated bluetooth card:
```
sudo pacman -S bluez bluez-utils pulseaudio-bluetooth
sudo systemctl enable --now bluetooth
```
  
- With a bluetooth USB dongle:  
*(My bluetooth USB dongle needs some deprecated tools to work properly)*
```
sudo pacman -S bluez pulseaudio-bluetooth
yay -S bluez-utils-compat 
sudo systemctl enable --now bluetooth
```

## Mount secondary disk in fstab

```
sudo blkid #Show and copy the UUID of my secondary disk
sudo vim /etc/fstab
```
> #Data  
> UUID=107b1979-e8ed-466d-bb10-15e72f7dd2ae       /run/media/rcandau/data         ext4          defaults 0 2  

## Install packages

- Main packages:
```
sudo pacman -S discord distrobox dmenu docker firefox glow hexchat htop hugo keepassxc mlocate neofetch ntfs-3g steam thunderbird tmux virt-viewer vlc zathura zathura-pdf-poppler #Main packages from Arch repos
yay -S arch-update onlyoffice-bin pa-applet-git protonmail-bridge-bin spotify systray-x-git timeshift ventoy-bin zaman #Main packages from the AUR
sudo pacman -S --asdeps gnome-keyring gnu-free-fonts ttf-dejavu xclip xdg-utils #Optional dependencies that I need for the above packages
systemctl --user enable --now arch-update.timer #Start and enable associated timers
sudo systemctl enable --now docker cronie #Start and enable associated services
```
  
- Laptop only packages:
```
sudo pacman -S autorandr openresolv wireguard-tools tlp
sudo systemctl mask systemd-rfkill.service systemd-rfkill.socket && sudo systemctl enable --now tlp.service
```

## Theme

- Shell: Orchis-dark-compact - https://www.gnome-look.org/p/1357889/
- Icon: Tela-Circle-Blue - https://www.gnome-look.org/p/1359276/
- Cursor: McMojave cursors - https://www.opendesktop.org/s/Gnome/p/1355701/

## Bash Theme

https://github.com/speedenator/agnoster-bash  
  
```
cd /tmp
git clone https://github.com/powerline/fonts.git fonts
cd fonts
sh install.sh
cd $HOME
mkdir -p .bash/themes/agnoster-bash
git clone https://github.com/speedenator/agnoster-bash.git .bash/themes/agnoster-bash
```

## Dotfiles

```
mkdir -p ~/.config/i3 && curl https://raw.githubusercontent.com/Antiz96/Linux-Desktop/main/Dotfiles/i3/i3-config -o ~/.config/i3/config && curl https://raw.githubusercontent.com/Antiz96/Linux-Desktop/main/Dotfiles/i3/lock.png -o ~/.config/i3/lock.png && curl https://raw.githubusercontent.com/Antiz96/Linux-Desktop/main/Dotfiles/i3/wallpaper.jpg -o ~/.config/i3/wallpaper.jpg && curl https://raw.githubusercontent.com/Antiz96/Linux-Desktop/main/Dotfiles/i3/shutdown.svg -o ~/.config/i3/shutdown.svg
mkdir -p ~/.config/tint2 && curl https://raw.githubusercontent.com/Antiz96/Linux-Desktop/main/Dotfiles/i3/Arch_Taskbar.png -o ~/.config/tint2/Arch_Taskbar.png && curl https://raw.githubusercontent.com/Antiz96/Linux-Desktop/main/Dotfiles/i3/caffeine-cup-empty.svg -o ~/.config/tint2/caffeine-cup-empty.svg && curl https://raw.githubusercontent.com/Antiz96/Linux-Desktop/main/Dotfiles/i3/caffeine-cup-full.svg -o ~/.config/tint2/caffeine-cup-full.svg && cp -f ~/.config/tint2/caffeine-cup-empty.svg ~/.config/tint2/autolock.svg && curl https://raw.githubusercontent.com/Antiz96/Linux-Desktop/main/Dotfiles/i3/tint2rc -o ~/.config/tint2/tint2rc
curl https://raw.githubusercontent.com/Antiz96/Linux-Desktop/main/Dotfiles/General/bashrc_Arch.txt -o ~/.bashrc
curl https://raw.githubusercontent.com/Antiz96/Linux-Desktop/main/Dotfiles/General/tmux.conf -o ~/.tmux.conf
mkdir -p ~/.config/zathura/ && curl https://raw.githubusercontent.com/Antiz96/Linux-Desktop/main/Dotfiles/General/zathurarc -o ~/.config/zathura/zathurarc && xdg-mime default org.pwmt.zathura.desktop application/pdf
curl https://raw.githubusercontent.com/Antiz96/Linux-Desktop/main/Dotfiles/General/vimrc -o ~/.vimrc && mkdir -p ~/.vim/colors && curl https://raw.githubusercontent.com/vv9k/vim-github-dark/master/colors/ghdark.vim -o ~/.vim/colors/ghdark.vim
mkdir -p ~/.config/xfce4/terminal && curl https://raw.githubusercontent.com/Antiz96/Linux-Desktop/main/Dotfiles/i3/terminalrc -o ~/.config/xfce4/terminal/terminalrc
mkdir -p ~/.config/gsimplecal/ && curl https://raw.githubusercontent.com/Antiz96/Linux-Desktop/main/Dotfiles/i3/cal-config -o ~/.config/gsimplecal/config
sudo curl https://raw.githubusercontent.com/Antiz96/Linux-Desktop/main/Dotfiles/i3/picom.conf -o /etc/xdg/picom.conf
sudo curl https://raw.githubusercontent.com/Antiz96/Linux-Desktop/main/Dotfiles/General/90-touchpad.conf -o /etc/X11/xorg.conf.d/90-touchpad.conf
source ~/.bashrc
```

## Make bluetooth autoconnect to trusted devices

```
sudo vi /etc/pulse/default.pa
```
> [...]  
> #Automatically switch to newly-connected devices  
> load-module module-switch-on-connect  

## Keyboard Shortcuts

- Super + A = Open app finder/launcher
- Super + F = Toggle tabbed layout
- Super + D = Close focused window
- Super + E = Thunar
- Super + M = Mousepad
- Super + C = Calculator
- Super + T = Terminal
- Super + B = Firefox
- Super + L = Lockscreen
- Super + H = Split horizontally (default mode)
- Super + V = Split vertically
- Super + G = Switch tiling layout of opened windows (vertical/horizontal)
- Super + S = Toggle sticky window
- Super + R = Resize window
- Super + Space = Toggle floating window
- Super + Right = Switch focused window to the right one
- Super + Left = Switch focused window to the left one
- Super + Up = Switch focused window to the up one
- Super + Down = Switch focused window to the down one
- Super + Shift + Right = Move focused window to the right (when reaching the edge of the screen, makes the window move to the right screen if there's one)
- Super + Shift + Left = Move focused window to the left (when reaching the edge of the screen, makes the window move to the left screen if there's one)
- Super + Shift + Up = Move focused window up (when reaching the edge of the screen, makes the window move to the up screen if there's one)
- Super + Shift + Down = Move focused window down (when reaching the edge of the screen, makes the window move to the down screen if there's one)
- Super + Shift + F1 = Move window to workspace 1
- Super + Shift + F2 = Move window to workspace 2
- Super + Shift + F3 = Move window to workspace 3
- Super + Shift + F4 = Move window to workspace 4
- Super + Shift + F5 = Move window to workspace 5
- Super + Shift + F6 = Move window to workspace 6
- Super + F1 = Switch to workspace1
- Super + F2 = Switch to workspace2
- Super + F3 = Switch to workspace3
- Super + F4 = Switch to workspace4
- Super + F5 = Switch to workspace5
- Super + F6 = Switch to workspace6
- Super + Tab = Switch to next workspace
- Super + Esc = Open the power menu
